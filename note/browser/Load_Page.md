# 从输入URL到加载网页的过程

## 1. DNS

## 2. HTTP

## 3. TCP

## 4. 渲染
### 4.1 DOM tree
处理 HTML 标记并构造 DOM 树。DOM 树描述了文档的内容。`<html>` 元素是第一个标签也是文档树的根节点。树反映了不同标记之间的关系和层次结构。嵌套在其他标记中的标记是子节点。DOM 节点的数量越多，构建 DOM 树所需的时间就越长。

当解析器发现**非阻塞资源**，例如一张图片，浏览器会请求这些资源并且继续解析。当遇到一个 CSS 文件时，解析也可以继续进行，但是对于 `<script>` 标签（特别是没有 async 或者 defer 属性的）会阻塞渲染并停止 HTML 的解析。

#### 请求支持对象（support objects）
support objects 通常指 `<link>` 里的CSS链接，和`<img>` 中的图片链接。构造DOM树和请求支持对象会同时发生。

### 4.2 CSSOM tree
在收到CSS文件后，浏览器就会开始分析语法并将 CSS 规则转换为可以理解和使用的样式映射。浏览器遍历 CSS 中的每个规则集，根据 CSS 选择器创建具有父、子和兄弟关系的节点树。

UA样式会覆盖浏览器的默认样式

#### 阻塞渲染的CSS
TODO:


### 4.3 Render tree
渲染树由合并DOM树和CSSOM树构成，构造过程如下：
1. 从DOM树的根节点开始，遍历每个可见的节点。
    
    在这一步中，不可见的节点会被忽略，如`<script>`和`<meta>`。由CSS定义的隐藏节点如`<span>`也会被忽略。

    `display: none`会被忽略，而`visibility: hidden` 会出现在渲染树中。

2. 为每个可见的节点找到合适的CSS规则并应用
3. 将节点内容和样式结合产生可见节点

### 4.4 Layout
这一步计算每个对象在设备视窗（viewport）中的准确大小和位置，输出就是一个盒子模型（box model）。

### 4.5 Paint

## 5. 加载JS等资源

TODO: 